## lstm_manual_trainer.py使用说明

------------------------------------
#### I. 文件路径

* **current_path**（line107）定义了当前路径，即脚本所在路径
* **filepath**（line108）定义了文件读取路径: /当前路径/文件名.csv。此处若想再增加目录结构可参照**model_path**（line109）的定义，在文件名.csv之前增加子目录即可。
* **model_path**（line109）定义了模型存储路径，精确到输出文件名，当前的定义：/当前路径/lstm-model/8bef9af9a922e0b3
* **load_path**（line110）定义了模型载入路径（用于预测时重新载入模型），只精确到模型保存的路径，当前的定义：/当前路径/lstm-model
* **注意：** 因为在reload模型时tensorflow只会读取**load_path**目录下最近一次保存的模型（不会精确到模型名称），因此每个目录中只能保存同一类的模型（即上例中lstm-model的命名最好与KPI ID一一对应）
* line131 **lstm.lstm_train**的最后一个参数可以适当调大（建议10），表示日志打印的频率（当前是每个batch都打印一条日志）
* line163 **evaluate_model**的最后一个参数表示评估准确率时的容错阈值，当前设置是10%

#### II. LSTM调参建议

* **input_size** 固定不动，输入维度固定为1维
* **output_size** 固定不动， 输出维度固定为1维
* **batch_size** 建议调整区间[100, 500]，建议取100的倍数。该值越大收敛越快，但准确率可能会有所降低；该值越小越准确率越高，但收敛越慢且容易过拟合。
* **lstm_hide_size** 建议按2的N次方取。该值表示隐藏层大小，建议不低于64，不超过512
* **lstm_depth** 该值表示网络深度，建议调整区间[3, 10]。深度越深模型越复杂，训练时间越长。（深度越深不能保证准确率越高，深度加深也有可能导致准确率降低）
* **lstm_learning_rate** 该值表示学习率， 建议从[3e-3, 6e-3, 9e-3, 3e-2]中选值调参
* **lstm_time_step** 该值表示时间步（即用前N个值预测下一个值），同时也代表了LSTM模型在时间维度上的深度。建议调整区间[5, 30]，只能取整
* **train_pass_num** 该值表示训练轮数（epoch），建议调整区间[500, 2000]，具体选择根据训练时间做调整（若训练速度较慢也可小于500）

#### III. 特别说明

* 当训练速度过慢，无法完全训练N个epoch时，可中途强制终止程序。此时并不会影响之前已保存的模型。
* 若强制终止程序，请记录当前已完成的训练轮数（epoch），然后修改代码：将**lstm.lstm_train**（line131）注释。之后再次运行脚本，使用当前保存的模型做预测，评估模型的预测效果
* 若当前模型的预测准确率较低，则需重新调整模型参数，取消以上的注释，重新训练模型。
